{"version":3,"sources":["src/module-autoprovision-index.js"],"names":["idUrl","moduleAutoprovision","$formObj","$","initialize","initializeForm","initInputElements","body","on","e","id","Date","now","newRow","attr","data","html","replace","append","form","Form","setEvents","tab","dropdown","change","val","applyConfigurationChanges","api","url","Config","pbxUrl","successTest","response","Object","keys","length","result","onSuccess","cbBeforeSendForm","settings","cbAfterSendForm","table","resultSaveTables","key","syncTr","RegExp","templates","each","index","item","push","parent","name","find","empty","element","text","globalRootUrl","showTemplateOptions","modal","closable","onApprove","value","resEl","checkValues","removeTemplate","button","hasClass","ajax","type","success","remove","error","xhr","status","console","debug","removeUserTemplate","removeUriTemplate","removePbxRow","document","ready"],"mappings":"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","sourcesContent":["/*\n * Copyright © MIKO LLC - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Alexey Portnov, 12 2018\n */\n/* global globalRootUrl,Config, Form */\nconst idUrl     = 'module-autoprovision';\nconst moduleAutoprovision = {\n\t$formObj: $('#module-autoprovision-form'),\n\tinitialize() {\n\t\t// Динамическая проверка свободен ли внутренний номер\n\t\tmoduleAutoprovision.initializeForm();\n\t\tmoduleAutoprovision.initInputElements();\n\n\t\tlet body = $('body');\n\t\tbody.on('click', '#add-new-template-button', function (e) {\n\t\t\tlet id = 'none_'+Date.now();\n\t\t\tlet newRow \t= $('<tr>').attr('id', id);\n\t\t\tlet data =$('#templates #emptyTemplateRow').html();\n\t\t\tnewRow.html(data.replace(/emptyTemplateRow/g, id));\n\t\t\t$('#templates tbody').append(newRow);\n\t\t\t// Новые элементы нужно инициализировать на форме\n\t\t\tmoduleAutoprovision.initInputElements();\n\t\t\tmoduleAutoprovision.$formObj.form();\n\t\t\tForm.setEvents();\n\t\t});\n\n\t\tbody.on('click', '#add-new-phone_settings-button', function (e) {\n\t\t\tlet id = 'none_'+Date.now();\n\t\t\tlet newRow \t= $('<tr>').attr('id', id);\n\t\t\tlet data =$('#phone_settings #emptyTemplateRow').html();\n\t\t\tnewRow.html(data.replace(/emptyTemplateRow/g, id));\n\t\t\t$('#phone_settings tbody').append(newRow);\n\t\t\t// Новые элементы нужно инициализировать на форме\n\t\t\tmoduleAutoprovision.initInputElements();\n\t\t\tmoduleAutoprovision.$formObj.form();\n\t\t\tForm.setEvents();\n\t\t});\t\t\n\t\tbody.on('click', '#add-new-templates_uri-button', function (e) {\n\t\t\tlet id = 'none_'+Date.now();\n\t\t\tlet newRow \t= $('<tr>').attr('id', id);\n\t\t\tlet data =$('#templates_uri #emptyTemplateRow').html();\n\t\t\tnewRow.html(data.replace(/emptyTemplateRow/g, id));\n\t\t\t$('#templates_uri tbody').append(newRow);\n\t\t\t// Новые элементы нужно инициализировать на форме\n\t\t\tmoduleAutoprovision.initInputElements();\n\t\t\tmoduleAutoprovision.$formObj.form();\n\t\t\tForm.setEvents();\n\t\t});\n\t\tbody.on('click', '#add-new-other_pbx-button', function (e) {\n\t\t\tlet id = 'none_'+Date.now();\n\t\t\tlet newRow \t= $('<tr>').attr('id', id);\n\t\t\tlet data =$('#other_pbx #emptyTemplateRow').html();\n\t\t\tnewRow.html(data.replace(/emptyTemplateRow/g, id));\n\t\t\t$('#other_pbx tbody').append(newRow);\n\t\t\t// Новые элементы нужно инициализировать на форме\n\t\t\tmoduleAutoprovision.initInputElements();\n\t\t\tmoduleAutoprovision.$formObj.form();\n\t\t\tForm.setEvents();\n\t\t});\n\t},\n\tinitInputElements(){\n\t\t$('.menu .item').tab();\n\t\t$('div.dropdown').dropdown();\n\t\t$('input, textarea').change(function() {\n\t\t\t$(this).attr('value', $(this).val());\n\t\t});\n\t},\n\n\t/**\n     * Применение настроек модуля после изменения данных формы\n     */\n\tapplyConfigurationChanges() {\n\t\t$.api({\n\t\t\turl: `${Config.pbxUrl}/pbxcore/api/modules/ModuleAutoprovision/reload`,\n\t\t\ton: 'now',\n\t\t\tsuccessTest(response) {\n\t\t\t\treturn Object.keys(response).length > 0 && response.result === true;\n\t\t\t},\n\t\t\tonSuccess() {\n\t\t\t\t// moduleAutoprovision.testConnection();\n\t\t\t},\n\t\t});\n\t},\n\tcbBeforeSendForm(settings) {\n\t\tconst result = settings;\n\t\tresult.data = moduleAutoprovision.$formObj.form('get values');\n\t\treturn result;\n\t},\n\tcbAfterSendForm(response) {\n\t\tfor (let table in response.resultSaveTables) {\n\t\t\tfor (let key in response.resultSaveTables[table]) {\n\t\t\t\tlet syncTr = $(`#${table} tr#${key}`);\n\t\t\t\tlet html = syncTr.html();\n\t\t\t\tsyncTr.html(html.replace((new RegExp(key, \"g\")), response.resultSaveTables[table][key]));\n\t\t\t\tsyncTr.attr('id', response.resultSaveTables[table][key]);\n\t\t\t\t$(`.ui.modal[data-id=\"${key}\"][data-id-table=\"${table}\"]`).attr('data-id', response.resultSaveTables[table][key]);\n\t\t\t}\n\t\t}\n\t\tlet templates = [];\n\t\t$('#templates td[data-label=\"name\"]').each(function(index, item) {\n\t\t\ttemplates.push({\n\t\t\t\tid: $(item).parent().attr('id'),\n\t\t\t\tname: $(item).find('input').val()\n\t\t\t});\n\t\t});\n\t\t$('td[data-label=\"template\"] div.scrolling.menu').each(function(index, item) {\n\t\t\t$(item).empty();\n\t\t\tfor (let element of templates) {\n\t\t\t\tlet newRow \t= $('<div>')\n\t\t\t\t\t.attr('data-value', element.id)\n\t\t\t\t\t.attr('class', 'item')\n\t\t\t\t\t.text(element.name)\n\t\t\t\t;\n\t\t\t\t$(item).append(newRow);\n\t\t\t}\n\t\t});\n\t\tmoduleAutoprovision.initInputElements();\n\t\tmoduleAutoprovision.applyConfigurationChanges();\n\t\tmoduleAutoprovision.$formObj.form();\n\t\tForm.setEvents();\n\t},\n\tinitializeForm() {\n\t\tForm.$formObj = moduleAutoprovision.$formObj;\n\t\tForm.url = `${globalRootUrl}module-autoprovision/save`;\n\t\tForm.cbBeforeSendForm = moduleAutoprovision.cbBeforeSendForm;\n\t\tForm.cbAfterSendForm = moduleAutoprovision.cbAfterSendForm;\n\t\tForm.initialize();\n\t},\n\n\tshowTemplateOptions(id){\n\t\t$('.ui.modal[data-id=\"'+id+'\"][data-id-table=\"templates\"]').modal({\n\t\t\tclosable  : true,\n\t\t\tonApprove    : function(){\n\t\t\t\tlet value = $(this).find(\"textarea\").val();\n\t\t\t\tlet resEl = $('textarea[name=\"templates-template-'+$(this).attr('data-id')+'\"]');\n\t\t\t\tresEl.val(value);\n\t\t\t\tForm.checkValues()\n\t\t\t\treturn true;\n\t\t\t},\n\t\t}).modal('show');\n\t},\n\tremoveTemplate(id, button){\n\t\tif(!$(button).find('i').hasClass('close')){\n\t\t\treturn;\n\t\t}\n\t\t$.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl:  globalRootUrl + idUrl + \"/delete\",\n\t\t\tdata: {\n\t\t\t\ttable: 'Templates',\n\t\t\t\tid: id\n\t\t\t},\n\t\t\tsuccess: function(response) {\n\t\t\t\t$('#templates tr[id=\"'+id+'\"]').remove();\n\t\t\t},\n\t\t\terror: function(xhr, status, error) {\n\t\t\t\tconsole.debug(\"Ошибка запроса\", status, error);\n\t\t\t}\n\t\t});\n\t},\n\tremoveUserTemplate(id, button){\n\t\tif(!$(button).find('i').hasClass('close')){\n\t\t\treturn;\n\t\t}\n\t\t$.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl:  globalRootUrl + idUrl + \"/delete\",\n\t\t\tdata: {\n\t\t\t\ttable: 'TemplatesUsers',\n\t\t\t\tid: id\n\t\t\t},\n\t\t\tsuccess: function(response) {\n\t\t\t\t$('#phone_settings tr[id=\"'+id+'\"]').remove();\n\t\t\t},\n\t\t\terror: function(xhr, status, error) {\n\t\t\t\tconsole.debug(\"Ошибка запроса\", status, error);\n\t\t\t}\n\t\t});\n\t},\n\tremoveUriTemplate(id, button){\n\t\tif(!$(button).find('i').hasClass('close')){\n\t\t\treturn;\n\t\t}\n\t\t$.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl:  globalRootUrl + idUrl + \"/delete\",\n\t\t\tdata: {\n\t\t\t\ttable: 'TemplatesUri',\n\t\t\t\tid: id\n\t\t\t},\n\t\t\tsuccess: function(response) {\n\t\t\t\t$('#templates_uri tr[id=\"'+id+'\"]').remove();\n\t\t\t},\n\t\t\terror: function(xhr, status, error) {\n\t\t\t\tconsole.debug(\"Ошибка запроса\", status, error);\n\t\t\t}\n\t\t});\n\t},\n\tremovePbxRow(id, button){\n\t\tif(!$(button).find('i').hasClass('close')){\n\t\t\treturn;\n\t\t}\n\t\t$.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl:  globalRootUrl + idUrl + \"/delete\",\n\t\t\tdata: {\n\t\t\t\ttable: 'OtherPBX',\n\t\t\t\tid: id\n\t\t\t},\n\t\t\tsuccess: function(response) {\n\t\t\t\t$('#other_pbx tr[id=\"'+id+'\"]').remove();\n\t\t\t},\n\t\t\terror: function(xhr, status, error) {\n\t\t\t\tconsole.debug(\"Ошибка запроса\", status, error);\n\t\t\t}\n\t\t});\n\t},\n\n};\n\n\n$(document).ready(() => {\n\tmoduleAutoprovision.initialize();\n});\n"],"file":"module-autoprovision-index.js"}